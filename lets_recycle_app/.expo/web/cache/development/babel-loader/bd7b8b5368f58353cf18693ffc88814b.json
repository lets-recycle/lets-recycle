{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport AsyncStorage from \"react-native-web/dist/exports/AsyncStorage\";\nimport createDataContext from \"./createDataContext\";\nimport { navigate } from \"../navigationRef\";\nimport firebase from 'firebase';\nvar API = 'https://lets-recycle-67594.firebaseio.com';\n\nvar authReducer = function authReducer(state, action) {\n  switch (action.type) {\n    case 'add_error':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        errorMessage: action.payload\n      });\n\n    case 'signin':\n      return {\n        errorMessage: '',\n        user: action.payload\n      };\n\n    case 'clear_error_message':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        errorMessage: ''\n      });\n\n    case 'signout':\n      return {\n        user: null,\n        errorMessage: ''\n      };\n\n    default:\n      return state;\n  }\n};\n\nvar tryLocalSignin = function tryLocalSignin(dispatch) {\n  return function _callee() {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(firebase.auth().currentUser);\n\n          case 2:\n            user = _context.sent;\n            console.log(user, 'ppppppppppppppppp');\n\n            if (user) {\n              dispatch({\n                type: 'signin',\n                payload: user\n              });\n            } else {\n              navigate('Signup');\n            }\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\n\nvar clearErrorMessage = function clearErrorMessage(dispatch) {\n  return function () {\n    dispatch({\n      type: 'clear_error_message'\n    });\n  };\n};\n\nvar signup = function signup(dispatch) {\n  return function _callee3(_ref) {\n    var email, password, _user;\n\n    return _regeneratorRuntime.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            email = _ref.email, password = _ref.password;\n            _context3.prev = 1;\n            _context3.next = 4;\n            return _regeneratorRuntime.awrap(firebase.auth().createUserWithEmailAndPassword(email, password).catch(function (error) {\n              console.log(error[0]);\n              console.log(\"fail\");\n              dispatch({\n                type: 'add_error',\n                payload: error[0]\n              });\n            }));\n\n          case 4:\n            console.log(\"token\", firebase.auth().currentUser);\n            _user = firebase.auth().currentUser;\n            dispatch({\n              type: 'signin',\n              payload: firebase.auth().currentUser\n            });\n\n            (function _callee2() {\n              return _regeneratorRuntime.async(function _callee2$(_context2) {\n                while (1) {\n                  switch (_context2.prev = _context2.next) {\n                    case 0:\n                      _context2.next = 2;\n                      return _regeneratorRuntime.awrap(fetch(API + \"/users.json\", {\n                        method: 'POST',\n                        mode: 'cors',\n                        headers: new Headers({\n                          'Content-Type': 'application/json',\n                          'Accept': 'application/json'\n                        }),\n                        body: JSON.stringify({\n                          \"id\": _user.uid,\n                          \"name\": 'no Name',\n                          \"email\": _user.email,\n                          \"paswword\": \"456\",\n                          \"location\": \"amman\",\n                          \"balance\": 0,\n                          \"number\": _user.phoneNumber\n                        })\n                      }));\n\n                    case 2:\n                    case \"end\":\n                      return _context2.stop();\n                  }\n                }\n              }, null, null, null, Promise);\n            })();\n\n            navigate('Home');\n            _context3.next = 15;\n            break;\n\n          case 11:\n            _context3.prev = 11;\n            _context3.t0 = _context3[\"catch\"](1);\n            console.log(_context3.t0);\n            dispatch({\n              type: 'add_error',\n              payload: 'Something went wrong with sign up'\n            });\n\n          case 15:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[1, 11]], Promise);\n  };\n};\n\nvar signin = function signin(dispatch) {\n  return function _callee6(_ref2) {\n    var email, password;\n    return _regeneratorRuntime.async(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            email = _ref2.email, password = _ref2.password;\n            _context6.prev = 1;\n            _context6.next = 4;\n            return _regeneratorRuntime.awrap(firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(function _callee5() {\n              return _regeneratorRuntime.async(function _callee5$(_context5) {\n                while (1) {\n                  switch (_context5.prev = _context5.next) {\n                    case 0:\n                      _context5.next = 2;\n                      return _regeneratorRuntime.awrap(firebase.auth().signInWithEmailAndPassword(email, password).catch(function (error) {\n                        console.log(\"fail\");\n                        dispatch({\n                          type: 'add_error',\n                          payload: 'Something went wrong with sign in'\n                        });\n                      }));\n\n                    case 2:\n                      console.log(\"done\");\n                      console.log(\"token\", firebase.auth().currentUser);\n                      _context5.next = 6;\n                      return _regeneratorRuntime.awrap(dispatch({\n                        type: 'signin',\n                        payload: firebase.auth().currentUser\n                      }));\n\n                    case 6:\n                      (function _callee4() {\n                        return _regeneratorRuntime.async(function _callee4$(_context4) {\n                          while (1) {\n                            switch (_context4.prev = _context4.next) {\n                              case 0:\n                                _context4.next = 2;\n                                return _regeneratorRuntime.awrap(fetch(API + \"/users.json\", {\n                                  method: 'POST',\n                                  mode: 'cors',\n                                  headers: new Headers({\n                                    'Content-Type': 'application/json',\n                                    'Accept': 'application/json'\n                                  }),\n                                  body: JSON.stringify({\n                                    \"id\": state.user.uid,\n                                    \"name\": state.user.displayName,\n                                    \"email\": state.user.email,\n                                    \"paswword\": \"456\",\n                                    \"location\": \"amman\",\n                                    \"balance\": 0,\n                                    \"number\": state.user.phoneNumber\n                                  })\n                                }));\n\n                              case 2:\n                              case \"end\":\n                                return _context4.stop();\n                            }\n                          }\n                        }, null, null, null, Promise);\n                      })();\n\n                    case 7:\n                    case \"end\":\n                      return _context5.stop();\n                  }\n                }\n              }, null, null, null, Promise);\n            }).catch(function (error) {\n              var errorCode = error.code;\n              var errorMessage = error.message;\n            }));\n\n          case 4:\n            navigate('Home');\n            _context6.next = 10;\n            break;\n\n          case 7:\n            _context6.prev = 7;\n            _context6.t0 = _context6[\"catch\"](1);\n            dispatch({\n              type: 'add_error',\n              payload: 'Something went wrong with sign in'\n            });\n\n          case 10:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, null, null, [[1, 7]], Promise);\n  };\n};\n\nvar signout = function signout(dispatch) {\n  return function _callee7() {\n    return _regeneratorRuntime.async(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            dispatch({\n              type: 'signout'\n            });\n            navigate('loginFlow');\n\n          case 2:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\n\nvar update = function update(dispatch) {\n  return function _callee8(obj) {\n    var user;\n    return _regeneratorRuntime.async(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            console.log(\"obj---------->\", obj);\n            user = firebase.auth().currentUser;\n            _context8.next = 4;\n            return _regeneratorRuntime.awrap(user.updateProfile(_objectSpread(_objectSpread({}, user), obj)).then(function () {\n              navigate('Profile');\n            }).catch(function (error) {}));\n\n          case 4:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\n\nvar _createDataContext = createDataContext(authReducer, {\n  signin: signin,\n  signout: signout,\n  signup: signup,\n  clearErrorMessage: clearErrorMessage,\n  tryLocalSignin: tryLocalSignin,\n  update: update\n}, {\n  user: null,\n  errorMessage: ''\n}),\n    Provider = _createDataContext.Provider,\n    Context = _createDataContext.Context;\n\nexport { Provider, Context };","map":{"version":3,"sources":["/mnt/c/Users/STD/Desktop/lets_recycle/lets_recycle/lets_recycle_app/src/context/AuthContext.js"],"names":["createDataContext","navigate","firebase","API","authReducer","state","action","type","errorMessage","payload","user","tryLocalSignin","dispatch","auth","currentUser","console","log","clearErrorMessage","signup","email","password","createUserWithEmailAndPassword","catch","error","fetch","method","mode","headers","Headers","body","JSON","stringify","uid","phoneNumber","signin","setPersistence","Auth","Persistence","LOCAL","then","signInWithEmailAndPassword","displayName","errorCode","code","message","signout","update","obj","updateProfile","Provider","Context"],"mappings":"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","sourcesContent":["import { AsyncStorage } from 'react-native';\nimport createDataContext from './createDataContext';\nimport { navigate } from '../navigationRef';\nimport firebase from 'firebase';\n\nconst API = 'https://lets-recycle-67594.firebaseio.com'\n\nconst authReducer = (state, action) => {\n  switch (action.type) {\n    case 'add_error':\n      return { ...state, errorMessage: action.payload };\n    case 'signin':\n      return { errorMessage: '', user: action.payload };\n    case 'clear_error_message':\n      return { ...state, errorMessage: '' };\n    case 'signout':\n      return { user: null, errorMessage: '' };\n    default:\n      return state;\n  }\n};\n\nconst tryLocalSignin = dispatch => async () => {\n  // const token = await AsyncStorage.getItem('token');\n  user = await firebase.auth().currentUser\n  console.log(user, 'ppppppppppppppppp');\n  if (user) {\n    dispatch({ type: 'signin', payload: user });\n  } else {\n    navigate('Signup');\n  }\n};\n\nconst clearErrorMessage = dispatch => () => {\n  dispatch({ type: 'clear_error_message' });\n};\n\nconst signup = dispatch => async ({ email, password }) => {\n  try {\n    await firebase.auth().createUserWithEmailAndPassword(email, password).catch(function (error) {\n      console.log(error[0])\n      console.log(\"fail\");\n      dispatch({\n        type: 'add_error',\n        payload: error[0]\n      });\n    });\n    console.log(\"token\", firebase.auth().currentUser);\n    let user = firebase.auth().currentUser;\n    dispatch({ type: 'signin', payload: firebase.auth().currentUser });\n    (async () => {\n      await fetch(`${API}/users.json`, {\n        method: 'POST',\n        mode: 'cors',\n        headers: new Headers({\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        }),\n        body: JSON.stringify({\n          \"id\": user.uid,\n          \"name\": 'no Name',\n          \"email\": user.email,\n          \"paswword\": \"456\",\n          \"location\": \"amman\",\n          \"balance\": 0,\n          \"number\": user.phoneNumber,\n        })\n      });\n    })();\n\n    navigate('Home');\n  } catch (err) {\n    console.log(err)\n    dispatch({\n      type: 'add_error',\n      payload: 'Something went wrong with sign up'\n    });\n  }\n};\n\nconst signin = dispatch => async ({ email, password }) => {\n  try {\n    await firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL)\n      .then(async function () {\n        // Existing and future Auth states are now persisted in the current\n        // session only. Closing the window would clear any existing state even\n        // if a user forgets to sign out.\n        // ...\n        // New sign-in will be persisted with session persistence.\n        await firebase.auth().signInWithEmailAndPassword(email, password).catch(function (error) {\n          console.log(\"fail\");\n          dispatch({\n            type: 'add_error',\n            payload: 'Something went wrong with sign in'\n          });\n        });\n        console.log(\"done\");\n        console.log(\"token\", firebase.auth().currentUser)\n        await dispatch({ type: 'signin', payload: firebase.auth().currentUser });\n        (async () => {\n          await fetch(`${API}/users.json`, {\n            method: 'POST',\n            mode: 'cors',\n            headers: new Headers({\n              'Content-Type': 'application/json',\n              'Accept': 'application/json'\n            }),\n            body: JSON.stringify({\n              \"id\": state.user.uid,\n              \"name\": state.user.displayName,\n              \"email\": state.user.email,\n              \"paswword\": \"456\",\n              \"location\": \"amman\",\n              \"balance\": 0,\n              \"number\": state.user.phoneNumber,\n            })\n          });\n        })();\n      })\n      .catch(function (error) {\n        // Handle Errors here.\n        var errorCode = error.code;\n        var errorMessage = error.message;\n      });\n    navigate('Home');\n  } catch (err) {\n    dispatch({\n      type: 'add_error',\n      payload: 'Something went wrong with sign in'\n    });\n  }\n};\n\nconst signout = dispatch => async () => {\n  // await AsyncStorage.removeItem('token');\n  dispatch({ type: 'signout' });\n  navigate('loginFlow');\n};\n\nconst update = dispatch => async (obj) => {\n  // await AsyncStorage.removeItem('token');\n  console.log(\"obj---------->\", obj)\n  var user = firebase.auth().currentUser;\n  await user.updateProfile({ ...user, ...obj }).then(function () {\n    // Update successful.\n    //   dispatch({ type: 'signin' });\n    navigate('Profile');\n  }).catch(function (error) {\n    // An error happened.\n  });\n\n};\n\nexport const { Provider, Context } = createDataContext(\n  authReducer,\n  { signin, signout, signup, clearErrorMessage, tryLocalSignin, update },\n  { user: null, errorMessage: '' }\n);\n"]},"metadata":{},"sourceType":"module"}